{
  "version": 3,
  "file": "renderer.js",
  "sourceRoot": "..",
  "sources": [
    "src/renderer.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "HalfPI    = Math.PI / 2\nTau       = Math.PI * 2\nTauDiv360 = Tau / 360\n\npolarToCart = (r, theta) ->\n  [ r * Math.cos theta\n    r * Math.sin theta ]\n\ntoRadians = (degrees) -> TauDiv360 * degrees\n\nclass Simulator\n  constructor: (@root = window) ->\n    { @document } = @root\n    { @body } = @document\n    # @document\n    #   .getElementsByTagName 'title'\n    #   [0]\n    #   .innerText = title\n\n    @createElement = (args...) => @document.createElement args...\n\n    @canvas = @createElement 'canvas'\n    @canvas.onclick = => @toggleRunning()\n    @ctx = @canvas.getContext '2d'\n    @body.appendChild @canvas\n\n    @resize()\n    @root.onresize = => @resize()\n\n  start: ->\n    @running = true\n    @animate()\n\n  toggleRunning: =>\n    if @running\n      @stop()\n    else\n      @start()\n\n  restart: ->\n    @stop()\n    @start()\n\n  stop: ->\n    @running = false\n\n    if @animationRequest\n      id = @animationRequest\n      @animationRequest = null\n      @root.cancelAnimationFrame id\n\n  animate: ->\n    return unless @running\n\n    @animationRequest ?= @root.requestAnimationFrame =>\n      @tick++\n      @animationRequest = null\n      @iterate()\n      @drawFrame()\n\n      @animate()\n\n  resize: ->\n    { innerWidth: @width, innerHeight: @height } = @root\n    @mx = @width  / 2\n    @my = @height / 2\n\n    Object.assign @canvas, { @width, @height }\n\n  clearFrame: (color) ->\n    @ctx.fillStyle   =\n    @ctx.strokeStyle = color\n    @ctx.fillRect 0, 0, @width, @height\n\n  drawCircle: (x, y, radius, color) ->\n    @ctx.fillStyle   =\n    @ctx.strokeStyle = color\n    @ctx.beginPath()\n    @ctx.arc x, y, radius, 0, Tau\n    @ctx.fill()\n\n\nclass Worm extends Simulator\n  constructor: (args...) ->\n    super args...\n\n    @length = 64\n    @vel    = 5\n    @radius = 10\n    @turnSpeed = (Tau / 360) * 30\n\n    {mx: x, my: y} = @\n    @segments  = [1..@length].map -> {x, y}\n    @dir       = Math.random() * Tau\n    @shadeStep = 127 / @length\n\n  iterate: ->\n    @dir += (Math.random() - 0.5) * @turnSpeed\n\n    @dir -= Tau if @dir >  Math.PI\n    @dir += Tau if @dir < -Math.PI\n\n    [dx, dy] = polarToCart @vel, @dir\n\n    {x, y} = @segments[0]\n    x = (x + dx + @width)  % @width\n    y = (y + dy + @height) % @height\n\n    @segments.unshift {x, y}\n    @segments.pop()\n\n  resize: ->\n    super arguments...\n\n    @clearFrame 'rgb(128,32,0)'\n\n  drawFrame: ->\n    for {x, y}, i in @segments[..-3]\n      c = Math.floor ((@length - i) * @shadeStep + 128)\n      @drawCircle x, y, @radius, color = \"rgb(#{[c, c, c].join ','}\"\n\n    tail = @segments[-2..]\n    {x, y} = tail[1]; @drawCircle x, y, @radius, 'black'\n    {x, y} = tail[0]; @drawCircle x, y, @radius, color\n\nObject.assign window, {Simulator, Worm}\n\n(window.worm = new Worm).start()\n"
  ]
}